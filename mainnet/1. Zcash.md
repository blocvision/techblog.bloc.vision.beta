# ZCASH

제트캐시의 창시자인 주코 윌콕스는 IT 보안 전문가로서 활동해왔습니다. 
제트캐시라고 불리는 ZCASH 는 따라서 보안과 매우 밀접한 관련이 있습니다. 
ZCASH가 사용하는 알고리즘은 영지식 증명(zero-knowledge proof) 방식을 쓰고 있습니다. 영 지식 증명이란 말 그대로 아무것도 알려주지도 않으면서 상대가 정직한지 정직 하지 않은지 판별해 낼 수 있다는 것을 말합니ㄴ다. 

비교하자면 비트코인은 기본적으로 모든 것을 공개합니다. 하지만 제트캐시는 수신자, 송신자, 전송 금액등의 정보를 노출하지 않으면서 해당 트랜잭션의 유효성을 송수신 노드 외의 다른 노드들에게 알릴 수 있습니다. 하지만 여기에도 여러가지 기능이 있으니 이 부분은 작동 방식에서 알려드리겠습니다. 


이렇게 영-지식 증명을 해내기 위해서 제트캐시는 zk-SNARKs 라는 라이브러리를 이용해 증명자와 상대(검증자) 사이의 상호작용 없이 증명 될 수 있게 됩니다.





## zk-SNARKs 란 무엇인가?


 먼저 zk-SNARKs로 검증되는 방식에 대해 알아야 합니다.
 비트코인에서 사용하는 타원곡선 암호학 처럼 좌표를 가지고 서로 대입을 해봄으로써 증명을 합니다. 그래서 트랜잭션의 정보를 공개하지 않고도 유효성을 검증해 볼 수 있는 겁니다.





## zk_SNARKs 검증 방법

zk_SNARK가 작동하는 방식은 아래와 같습니다.

    계산 → 사칙 연산 → R1CS → QAP → zk-SNARK

먼저 작은 연산을 나누어 사칙연산을 만듭니다. 그리고 R1CS 라고 하는 것을 만들어 좌-우로 옮겨가며 잘 만들어 졌는지 확인합니다. 이때 제약 조건을 점검해야 하는데 이때 QAP 방식을 이용합니다. 

각 게이트마다 들어가는 변수가 방정식의 해가 될수 있게 만듭니다. (P(1) = x-1)  그리고 이를 모아 하나의 방정식을 만듭니다. 예를 한번 보겠습니다. T(x) = (x — 1)(x — 2)(x — 3) 그렇다면 P가 T로 나누어 떨어지는 것을 볼 수 있습니다.

이제 이 만들어진 다항식으로 증명시에 다항식간의 비교가 이루어 집니다. 검증자와 상대자 간의 다항식이 같다면 특정좌표 s를 줘도 같은 값이 나오겠지만 다른 다항식이라면 높은 확률로 다른 점을 나타낼 것입니다. 두 다항식을 비교하는 작업은 *'서로 다른 다항식은 거의 대부분의 점에서 다르다'* 라는 Schwartz-Zippel Lemma에 따라 임의의 점 s에 대해서 두개의 다항식이 같은 값을 가진다는 것을 보입니다.

즉, QAP 형태로 문제가 변형되면, 증명 과정에 있어서 문제 전체가 필요하지 않고 특정 포인트 s에 대입한 값만 비교하면 되기 때문에, 기존 증명 과정에 비해 훨씬 간결해 집니다.

실제로 두 다항식을 비교하는 과정에서 Homomorphic Hidings 이나 Pairings on Elliptic Curves 등의 기법을 사용합니다.





## 작동방식 - 여러개의 트랜잭션 유형

트랜잭션 유형을 두가지로 나뉩니다. 
먼저 공개되지 않는 z(주소) 트랜잭션 또는 공개되는 t (투명)트랜잭션입니다. 
공개 여부를 정하는 것은 소유자의 몫이며 view key 와 지불 노출을 사용하여 결정합니다.
트랜잭션의 유형은 두가지로 나뉘지만 상호 운용이 가능합니다.






## ZCASH에서 채굴방식 


 제트캐시의 채굴 방식은 비트코인을 베이스로 하고 있기 때문에 POW 방식의 채굴방식을 사용하고 있습니다. 
 다른 채굴자들과 경쟁해서 이긴 채굴자가 블록을 생성하고 수수료를 받아가는 방식입니다.





[1] https://z.cash/ko_KR/technology/zksnarks/

[2] https://ko.wikipedia.org/wiki/%EC%98%81%EC%A7%80%EC%8B%9D_%EC%A6%9D%EB%AA%85

[3] https://medium.com/ai-networkkr/블록체인에서의-개인정보보호-기술-zk-snark-1-de5804e9b50e